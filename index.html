<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial scale=1.0">
    <meta http-equiv="X-UA-Comaptible" content="ie=edge">
    <title>Guess my number</title>
</head>
<body>
<h1>Guess the number</h1>
<input id="userName" type="text" placeholder="Username">
<input id="guess" type="number" placeholder="Guessnumber">
<button onclick="onbuttonpress()">Guess</button>
<select id="lang">
  <option value="en">Engelsk</option>
  <option value="no">Norsk</option>
  <option value="ro">Rumensk</option>
  <option value="fr">Fransk</option>
  <option value="ar">Arabisk</option>
  <option value="de">Tysk</option>
  <option value="bg">Bulgarisk</option>
  <option value="sa">Samisk</option>
</select>
<div id="feedback">
Your result will come here.
</div>
</body>




<script>

    function language(KEY){
      console.log(KEY);
      console.log("key");
    }
    const langInput = document.getElementById("lang");
        const nameInput = document.getElementById("userName");
        const guessInput = document.getElementById("guess");
function onbuttonpress(){
    if(nameInput){
      console.log("nameInput");
        const name = nameInput.value;
        if(name.length > 0){
            fetch(`/start/${name}}`).then(resp =>{
            if(resp.ok){
console.log(resp);
console.log(resp.json());
otherfunction(name);
            }});
        }
    }
}
 async function otherfunction(name){
  console.log("therfunction");
  if(guessInput){
    console.log("heeeey");
    const guess = guessInput.value;
    const langu = lang.value;
    console.log(langu);
    console.log(guess);
    if(guess.length > 0){
        fetch(`/guess/${name}/${guess}/${langu}`).then(resp =>{
        if(resp.ok){
          console.log("guessed?");
console.log(resp);
let repoyns = resp.json();
console.log(repoyns[1]);
nextfunction(repoyns);
        }});
    }
}

}
async function nextfunction(a){
    let mylet = await a;
let yeah = mylet.msg;
document.getElementById("feedback").innerHTML = yeah;

}
</script>
</html>
