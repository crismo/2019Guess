<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Guess my number</title>
</head>
<body>

    <input id="userName" type="text">
    <input id="guess" type="number">
    <button id="guessBtn">Guess</button>

    <script>
        function language(KEY){
            // Remember this function needs to do something.
        }
        //input
        const nameInput = document.getElementById("userName");
        const valueInput = document.getElementById("guess");
        //btn
        const btn1 = document.getElementById("guessBtn");


        if(nameInput){
            const name = nameInput.value
            if(name.length > 0){
                fetch(`/start/${name}`).then(resp =>{
                if(resp.ok){
                    resp.body.json()
                }}).then(json => {
                   
                });
            }
        }

        btn1.addEventListener('click', guessing);


        function guessing(){
            var startRequest = new Request("http://localhost:8000/start/" + nameInput.value);

            fetch(startRequest).then(response => {
                console.log(response);   
                if(response.ok){
                    var myRequest = new Request("http://localhost:8000/guess/" + nameInput.value + "/" + valueInput.value,  { method: 'POST'});
                    //console.log(myRequest);

                    //Error here, Internal server error code 500. 
                    fetch(myRequest).then(res => {
                        console.log(res);    
                    });
                }
            });



            


        }

        
        
    
    </script>

</body>
</html>